# Imagen base Node
FROM node:20

# Directorio de trabajo
WORKDIR /app

# Copiar dependencias primero (mejor cacheo)
COPY package*.json ./
RUN npm install

# Instalar wrangler globalmente en la build
RUN npm install -g wrangler@4.38.0

# Copiar el resto del proyecto (incluyendo public/)
COPY . .

# Exponer el puerto que usar√° wrangler en dev
EXPOSE 8788

# Comando por defecto: ejecutar wrangler en modo Pages + local
CMD ["wrangler", "pages", "dev", "public", "--local", "--port", "8788", "--host", "0.0.0.0"]
